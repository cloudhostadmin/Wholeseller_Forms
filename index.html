<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§ó‡•Ä‡§§‡§æ ‡§™‡•ç‡§∞‡•á‡§∏ ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§´‡•â‡§∞‡•ç‡§Æ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); padding: 20px; line-height: 1.5; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); width: 100%; }
        .header { text-align: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 3px solid #ff6b35; }
        .header h1 { color: #d35400; font-size: 28px; margin-bottom: 8px; }
        .header h2 { color: #555; font-size: 18px; font-weight: normal; margin-bottom: 5px; }
        .header p { color: #666; font-size: 13px; margin-top: 5px; }
        .tally-code-section { margin-bottom: 25px; }
        .section { margin-bottom: 25px; page-break-inside: avoid; }
        .section-title { background: #ff6b35; color: white; padding: 10px 18px; margin-bottom: 15px; border-radius: 5px; font-size: 16px; font-weight: bold; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 6px; color: #333; font-weight: 600; font-size: 13px; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="number"], textarea { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 13px; transition: border-color 0.3s; box-sizing: border-box; font-family: inherit; }
        input:focus, textarea:focus { outline: none; border-color: #ff6b35; }
        textarea { min-height: 65px; resize: vertical; }
        .row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .checkbox-group { display: flex; gap: 15px; flex-wrap: wrap; margin-top: 8px; }
        .checkbox-group label { display: flex; align-items: center; font-weight: normal; margin-bottom: 0; }
        .checkbox-group input[type="checkbox"], .checkbox-group input[type="radio"] { width: auto; margin-right: 6px; }
        .declaration { background: #fff3cd; padding: 15px; border-radius: 5px; border-left: 4px solid #ffc107; page-break-inside: avoid; margin-bottom: 20px; }
        .declaration h3 { color: #856404; margin-bottom: 10px; font-size: 14px; }
        .declaration p { margin-bottom: 10px; font-size: 12px; }
        .declaration ol { margin-left: 20px; font-size: 12px; line-height: 1.4; }
        .declaration li { margin-bottom: 6px; color: #333; }
        .signature-section { margin-top: 20px; padding-top: 15px; border-top: 2px solid #ddd; page-break-inside: avoid; }
        .signature-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px; }
        .submit-btn { background: #ff6b35; color: white; padding: 14px 35px; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 20px; transition: background 0.3s; }
        .submit-btn:hover { background: #d35400; }
        .submit-btn:disabled { background: #ccc; cursor: not-allowed; }
        .note { color: #666; font-size: 11px; font-style: italic; }
        .status-msg { display: none; font-size: 12px; margin-top: 4px; }
        .loading { color: #673ab7; }
        .error { color: #d93025; }
        .success { color: #1e8e3e; }
        .submit-status { margin-top: 10px; padding: 10px; border-radius: 5px; display: none; }
        .post-submit-actions { display: none; margin-top: 20px; padding: 20px; background: #e8f5e9; border-radius: 5px; text-align: center; }
        .post-submit-actions h3 { font-size: 16px; margin-bottom: 8px; }
        .post-submit-actions p { font-size: 13px; margin-bottom: 12px; }
        .post-submit-actions button { margin: 8px; padding: 10px 20px; background: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 13px; }
        .post-submit-actions button:hover { background: #45a049; }
        .whatsapp-btn { background: #25d366 !important; }
        .whatsapp-btn:hover { background: #128c7e !important; }
        .pdf-generating { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); z-index: 10000; text-align: center; display: none; }
        .pdf-generating.show { display: block; }
        .pdf-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: none; }
        .pdf-overlay.show { display: block; }
        
        /* Enhanced PDF mode styles */
        .pdf-mode {
            padding: 8mm !important;
            box-shadow: none !important;
            width: 210mm !important;
            max-width: 210mm !important;
            min-width: 210mm !important;
            font-size: 9pt !important;
            line-height: 1.3 !important;
            background: white !important;
        }
        .pdf-mode * {
            box-sizing: border-box !important;
        }
        .pdf-mode .header {
            margin-bottom: 8px !important;
            padding-bottom: 6px !important;
        }
        .pdf-mode .header h1 {
            font-size: 16pt !important;
            margin-bottom: 4px !important;
        }
        .pdf-mode .header h2 {
            font-size: 11pt !important;
            margin-bottom: 3px !important;
        }
        .pdf-mode .header p {
            font-size: 8pt !important;
        }
        .pdf-mode .tally-code-section {
            margin-bottom: 8px !important;
        }
        .pdf-mode .section {
            margin-bottom: 6px !important;
            page-break-inside: avoid !important;
        }
        .pdf-mode .section-title {
            font-size: 10pt !important;
            padding: 3px 8px !important;
            margin-bottom: 6px !important;
        }
        .pdf-mode .form-group {
            margin-bottom: 5px !important;
        }
        .pdf-mode label {
            font-size: 8pt !important;
            margin-bottom: 2px !important;
        }
        .pdf-mode input,
        .pdf-mode textarea {
            border: 0.5px solid #333 !important;
            background: white !important;
            font-size: 8pt !important;
            padding: 2px 4px !important;
            min-height: auto !important;
        }
        .pdf-mode textarea {
            line-height: 1.2 !important;
        }
        .pdf-mode .row,
        .pdf-mode .signature-row {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 8px !important;
        }
        .pdf-mode .checkbox-group {
            gap: 8px !important;
            font-size: 8pt !important;
        }
        .pdf-mode .declaration {
            padding: 6px !important;
            margin-bottom: 8px !important;
            font-size: 7pt !important;
            page-break-inside: avoid !important;
        }
        .pdf-mode .declaration h3 {
            font-size: 9pt !important;
            margin-bottom: 4px !important;
        }
        .pdf-mode .declaration p {
            font-size: 7pt !important;
            margin-bottom: 3px !important;
        }
        .pdf-mode .declaration ol {
            font-size: 7pt !important;
            line-height: 1.2 !important;
            margin-left: 12px !important;
        }
        .pdf-mode .declaration li {
            margin-bottom: 2px !important;
        }
        .pdf-mode .signature-section {
            margin-top: 8px !important;
            padding-top: 6px !important;
        }
        .pdf-mode .signature-row {
            margin-top: 6px !important;
        }
        .pdf-mode .submit-btn,
        .pdf-mode .post-submit-actions,
        .pdf-mode .submit-status,
        .pdf-mode .status-msg {
            display: none !important;
        }
        .pdf-mode .note {
            font-size: 7pt !important;
        }
        
        @media (max-width: 768px) {
            .container { padding: 20px; }
            .row, .signature-row { grid-template-columns: 1fr; }
        }
        @keyframes progress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="pdf-overlay" id="pdfOverlay"></div>
    <div class="pdf-generating" id="pdfGenerating">
        <h3>üìÑ PDF ‡§¨‡§®‡§æ‡§à ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...</h3>
        <p>‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç</p>
        <div style="margin-top: 20px;">
            <div style="width: 200px; height: 4px; background: #ddd; border-radius: 2px; overflow: hidden;">
                <div style="width: 0%; height: 100%; background: #4caf50; animation: progress 2s ease-in-out infinite;"></div>
            </div>
        </div>
    </div>

    <div class="container" id="formContainer">
        <div class="header">
            <h1>‡§ó‡•Ä‡§§‡§æ ‡§™‡•ç‡§∞‡•á‡§∏ ‡§ó‡•ã‡§∞‡§ñ‡§™‡•Å‡§∞</h1>
            <h2>‡§™‡•Å‡§∏‡•ç‡§§‡§ï ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§® ‡§´‡•â‡§∞‡•ç‡§Æ</h2>
            <p>‡§ó‡•Ä‡§§‡§æ ‡§™‡•ç‡§∞‡•á‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§®‡•ã‡§Ç ‡§ï‡•Ä ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§π‡•á‡§§‡•Å</p>
        </div>
        
        <div class="tally-code-section">
            <div class="form-group">
                <label>‡§ü‡•à‡§≤‡•Ä ‡§ï‡•ã‡§°: <span class="note">(‡§ï‡•á‡§µ‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§â‡§™‡§Ø‡•ã‡§ó ‡§π‡•á‡§§‡•Å)</span></label>
                <input type="text" name="tally_code" readonly style="background-color: #f0f0f0; cursor: not-allowed;">
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</div>
            <div class="form-group">
                <label>‡§¶‡•Å‡§ï‡§æ‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ: <span style="color: red;">*</span></label>
                <input type="text" name="shop_name" required>
            </div>
            <div class="form-group">
                <label>‡§∏‡•ç‡§µ‡§æ‡§Æ‡•Ä/‡§∏‡§æ‡§ù‡•á‡§¶‡§æ‡§∞/‡§®‡§ø‡§¶‡•á‡§∂‡§ï ‡§ï‡§æ ‡§®‡§æ‡§Æ: <span style="color: red;">*</span></label>
                <input type="text" name="full_name" required>
            </div>
            <div class="row">
                <div class="form-group">
                    <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞: <span style="color: red;">*</span></label>
                    <input type="tel" name="mobile" id="mobile" placeholder="10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" maxlength="10" required>
                </div>
                <div class="form-group">
                    <label>‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§®‡§Ç‡§¨‡§∞: <span class="note">(‡§Ø‡§¶‡§ø ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§∏‡•á ‡§≠‡§ø‡§®‡•ç‡§® ‡§π‡•ã)</span></label>
                    <input type="tel" name="whatsapp" id="whatsapp" placeholder="10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§®‡§Ç‡§¨‡§∞" maxlength="10">
                </div>
            </div>
            <div class="form-group">
                <label>‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ: <span style="color: red;">*</span></label>
                <input type="email" name="email" placeholder="example@email.com" required>
            </div>
            <div class="form-group">
                <label>‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: <span style="color: red;"></span></label>
                <div class="checkbox-group">
                    <label><input type="radio" name="business_type" value="proprietorship" required> ‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§§‡•ç‡§µ</label>
                    <label><input type="radio" name="business_type" value="partnership"> ‡§∏‡§æ‡§ù‡•á‡§¶‡§æ‡§∞‡•Ä</label>
                    <label><input type="radio" name="business_type" value="private_limited"> ‡§™‡•ç‡§∞‡§æ‡§á‡§µ‡•á‡§ü ‡§≤‡§ø‡§Æ‡§ø‡§ü‡•á‡§°</label>
                    <label><input type="radio" name="business_type" value="llp"> LLP</label>
                </div>
            </div>
            <div class="form-group">
                <label>‡§¶‡•Å‡§ï‡§æ‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡§§‡§æ: <span style="color: red;">*</span></label>
                <textarea name="shop_address" rows="2" required></textarea>
            </div>
            <div class="form-group">
                <label>‡§™‡§ø‡§®‡§ï‡•ã‡§°: <span style="color: red;">*</span></label>
                <input type="text" name="pincode" id="pincode" maxlength="6" pattern="[0-9]{6}" placeholder="6 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§ø‡§®‡§ï‡•ã‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" required>
                <div class="status-msg loading" id="pincodeLoading">üîÑ ‡§∏‡•ç‡§•‡§æ‡§® ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</div>
                <div class="status-msg error" id="pincodeError">‡§Ö‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§™‡§ø‡§®‡§ï‡•ã‡§° ‡§Ø‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§∏‡§Æ‡§∞‡•ç‡§•</div>
                <div class="status-msg success" id="pincodeSuccess">‚úì ‡§∏‡•ç‡§•‡§æ‡§® ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≤‡•ã‡§° ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ</div>
            </div>
            <div class="row">
                <div class="form-group">
                    <label>‡§∂‡§π‡§∞: <span style="color: red;">*</span></label>
                    <input type="text" name="city" id="city" placeholder="‡§∂‡§π‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" required>
                </div>
                <div class="form-group">
                    <label>‡§∞‡§æ‡§ú‡•ç‡§Ø: <span style="color: red;">*</span></label>
                    <input type="text" name="state" id="state" placeholder="‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" required>
                </div>
            </div>
            <div class="row">
                <div class="form-group">
                    <label>‡§™‡•à‡§® ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ: <span style="color: red;">*</span></label>
                    <input type="text" name="pan_business" id="pan_business" placeholder="ABCDE1234F" maxlength="10" minlength="10" pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" required style="text-transform: uppercase;">
                </div>
                <div class="form-group">
                    <label>‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ (GSTIN):</label>
                    <input type="text" name="gstin" maxlength="15">
                </div>
            </div>
            <div class="form-group">
                <label>‡§ó‡•Ä‡§§‡§æ‡§™‡•ç‡§∞‡•á‡§∏ ‡§ï‡•Ä ‡§™‡•Å‡§∏‡•ç‡§§‡§ï ‡§ï‡§¨ ‡§∏‡•á ‡§¨‡•á‡§ö ‡§∞‡§π‡•á ‡§π‡•à: <span style="color: red;">*</span></label>
                <input type="text" name="establishment_year" placeholder="‡§â‡§¶‡§æ‡§π‡§∞‡§£ 2010 ‡§Ø‡§æ ‡§¶‡§∏ ‡§µ‡§∞‡•ç‡§∑" maxlength="50" required>
            </div>
            <div class="form-group">
                <label>‡§ï‡•Å‡§≤ ‡§¶‡•Å‡§ï‡§æ‡§® ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ (‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü): <span style="color: red;">*</span></label>
                <input type="number" name="shop_area" placeholder="‡§â‡§¶‡§æ‡§π‡§∞‡§£ 500" required>
            </div>
            <div class="form-group">
                <label>‡§¶‡•Å‡§ï‡§æ‡§® ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£/‡§≤‡§æ‡§á‡§∏‡•á‡§Ç‡§∏ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ:</label>
                <input type="text" name="shop_license" placeholder="‡§≤‡§æ‡§á‡§∏‡•á‡§Ç‡§∏ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ">
            </div>
        </div>
        
        <div class="declaration">
            <h3>‡§ò‡•ã‡§∑‡§£‡§æ ‡§è‡§µ‡§Ç ‡§∂‡§∞‡•ç‡§§‡•á‡§Ç</h3>
            <p><strong>‡§Æ‡•à‡§Ç ‡§è‡§§‡§¶‡•ç‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ò‡•ã‡§∑‡§£‡§æ ‡§ï‡§∞‡§§‡§æ/‡§ï‡§∞‡§§‡•Ä ‡§π‡•Ç‡§Å ‡§ï‡§ø:</strong></p>
            <ol>
                <li>‡§ä‡§™‡§∞ ‡§¶‡•Ä ‡§ó‡§à ‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Æ‡•á‡§∞‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§∏‡§§‡•ç‡§Ø ‡§è‡§µ‡§Ç ‡§∏‡§π‡•Ä ‡§π‡•à</li>
                <li>‡§Æ‡•à‡§Ç ‡§ó‡•Ä‡§§‡§æ ‡§™‡•ç‡§∞‡•á‡§∏ ‡§ï‡•á ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ‡§ñ‡•Å‡§¶‡§∞‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø (MRP) ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§™‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§¨‡•á‡§ö‡•Ç‡§Å‡§ó‡§æ</li>
                <li>‡§Æ‡•à‡§Ç ‡§Ö‡§™‡§®‡•Ä ‡§¶‡•Å‡§ï‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ó‡•Ä‡§§‡§æ ‡§™‡•ç‡§∞‡•á‡§∏ ‡§ï‡•Ä ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§ö‡§ø‡§§ ‡§∏‡•ç‡§ü‡•â‡§ï ‡§è‡§µ‡§Ç ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•Ç‡§Å‡§ó‡§æ</li>
                <li>‡§Æ‡•à‡§Ç ‡§ó‡•Ä‡§§‡§æ ‡§™‡•ç‡§∞‡•á‡§∏ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡•Å‡§ù‡§æ‡§à ‡§ó‡§à ‡§™‡•ç‡§∞‡§ö‡§æ‡§∞ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§≠‡§æ‡§ó ‡§≤‡•Ç‡§Å‡§ó‡§æ</li>
                <li>‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§Ø-‡§∏‡§Æ‡§Ø ‡§™‡§∞ ‡§ó‡•Ä‡§§‡§æ ‡§™‡•ç‡§∞‡•á‡§∏ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡§≠‡•Ä ‡§®‡§ø‡§Ø‡§Æ‡•ã‡§Ç / ‡§°‡§ø‡§∏‡•ç‡§ï‡§æ‡§â‡§Ç‡§ü ‡§è‡§µ‡§Ç ‡§¨‡•ã‡§®‡§∏ ‡§∂‡§∞‡•ç‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§æ‡§≤‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§π‡§Æ‡§§ ‡§π‡•Ç‡§Å</li>
            </ol>
        </div>
        
        <div class="signature-section">
            <div class="signature-row">
                <div class="form-group">
                    <label>‡§Ü‡§µ‡•á‡§¶‡§® ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï:</label>
                    <input type="date" name="application_date" id="application_date" readonly style="background-color: #f0f0f0; cursor: not-allowed;">
                </div>
                <div class="form-group">
                    <label>‡§Ü‡§µ‡•á‡§¶‡§ï ‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞ (‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á):</label>
                    <input type="text" name="applicant_signature" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ">
                </div>
            </div>
        </div>
        
        <div class="submit-status" id="submitStatus"></div>
        <div class="post-submit-actions" id="postSubmitActions">
            <h3>‚úì ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ!</h3>
            <p>‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§è ‡§ó‡§è ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç:</p>
            <button onclick="downloadPDF()">üìÑ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§ï‡•ã PDF ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</button>
            <button class="whatsapp-btn" onclick="shareOnWhatsApp()">üì± ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç</button>
        </div>

        <div style="background: #e3f2fd; padding: 12px 15px; border-radius: 5px; border-left: 4px solid #2196f3; margin-top: 20px; margin-bottom: 15px;">
            <p style="margin: 0; color: #1565c0; font-size: 14px; font-weight: 600;">
                ‚ÑπÔ∏è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§≠‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§®‡§ø‡§ö‡•á ‡§¶‡§ø‡§è ‡§ó‡§è ‡§¨‡§ü‡§® (‡§´‡•â‡§∞‡•ç‡§Æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç) ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡•§
            </p>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn" onclick="handleSubmit(event)">‡§´‡•â‡§∞‡•ç‡§Æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç</button>
    </div>
    
    <script>
        // UPDATE THIS WITH YOUR APPS SCRIPT WEB APP URL
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbylEd89p0mbnZEjVoC_0LKJz7sH2_k7Nw2TYyIettVPa8qJb_-iwvSfrXCaeq8rqrIM7g/exec';
        
        window.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('application_date').value = today;
            autoFillFromURL();
        });
        
        const fieldMapping = {
            'full_name': 'full_name', 'name': 'full_name', 'mobile': 'mobile', 'whatsapp': 'whatsapp',
            'email': 'email', 'shop_name': 'shop_name', 'business_name': 'shop_name',
            'business_type': 'business_type', 'shop_address': 'shop_address', 'address': 'shop_address',
            'pincode': 'pincode', 'pin': 'pincode', 'city': 'city', 'state': 'state',
            'pan_business': 'pan_business', 'gstin': 'gstin', 'gst': 'gstin',
            'establishment_year': 'establishment_year', 'year': 'establishment_year',
            'shop_area': 'shop_area', 'area': 'shop_area', 'shop_license': 'shop_license',
            'license': 'shop_license', 'tally_code': 'tally_code'
        };
        
        function autoFillFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            let prefilledCount = 0;
            urlParams.forEach((value, key) => {
                const fieldId = fieldMapping[key.toLowerCase()];
                if (fieldId) {
                    const field = document.querySelector(`[name="${fieldId}"]`);
                    if (field) {
                        if (field.type === 'radio') {
                            const radioBtn = document.querySelector(`input[name="${fieldId}"][value="${value.toLowerCase()}"]`);
                            if (radioBtn) {
                                radioBtn.checked = true;
                                prefilledCount++;
                            }
                        } else if (field.type === 'checkbox') {
                            field.checked = value.toLowerCase() === 'true' || value === '1';
                            prefilledCount++;
                        } else {
                            field.value = value;
                            prefilledCount++;
                            if (fieldId === 'pincode' && value.length === 6) {
                                fetchPincodeDetails(value);
                            }
                        }
                        if (field.type !== 'date' && !field.hasAttribute('readonly')) {
                            field.style.backgroundColor = '#e8f5e9';
                            field.style.borderColor = '#4caf50';
                        }
                    }
                }
            });
            if (prefilledCount > 0) {
                console.log(`‚úì ${prefilledCount} fields pre-filled from URL parameters`);
            }
        }
        
        const pincodeInput = document.getElementById('pincode');
        const cityInput = document.getElementById('city');
        const stateInput = document.getElementById('state');
        const loadingMsg = document.getElementById('pincodeLoading');
        const errorMsg = document.getElementById('pincodeError');
        const successMsg = document.getElementById('pincodeSuccess');
        let debounceTimer;
        
        pincodeInput.addEventListener('input', function() {
            const pincode = this.value.trim();
            loadingMsg.style.display = 'none';
            errorMsg.style.display = 'none';
            successMsg.style.display = 'none';
            cityInput.value = '';
            stateInput.value = '';
            clearTimeout(debounceTimer);
            if (pincode.length === 6 && /^\d{6}$/.test(pincode)) {
                loadingMsg.style.display = 'block';
                debounceTimer = setTimeout(() => fetchPincodeDetails(pincode), 500);
            }
        });
        
        async function fetchPincodeDetails(pincode) {
            try {
                const response = await fetch(`https://api.postalpincode.in/pincode/${pincode}`);
                if (!response.ok) throw new Error('API request failed');
                const data = await response.json();
                loadingMsg.style.display = 'none';
                if (data && data[0] && data[0].Status === 'Success' && data[0].PostOffice && data[0].PostOffice.length > 0) {
                    const postOffice = data[0].PostOffice[0];
                    cityInput.value = postOffice.District || postOffice.Block || '';
                    stateInput.value = postOffice.State || '';
                    successMsg.style.display = 'block';
                    setTimeout(() => successMsg.style.display = 'none', 3000);
                } else {
                    errorMsg.textContent = '‡§™‡§ø‡§®‡§ï‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∂‡§π‡§∞ ‡§î‡§∞ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç';
                    errorMsg.style.display = 'block';
                }
            } catch (error) {
                console.error('Error fetching pincode details:', error);
                loadingMsg.style.display = 'none';
                errorMsg.textContent = '‡§ï‡•É‡§™‡§Ø‡§æ ‡§∂‡§π‡§∞ ‡§î‡§∞ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç';
                errorMsg.style.display = 'block';
                setTimeout(() => errorMsg.style.display = 'none', 5000);
            }
        }
        
        async function handleSubmit(event) {
            event.preventDefault();
            const submitBtn = document.getElementById('submitBtn');
            const statusDiv = document.getElementById('submitStatus');
            
            statusDiv.style.display = 'none';
            statusDiv.className = 'submit-status';
            
            const mobileInput = document.getElementById('mobile');
            const mobile = mobileInput.value.trim();
            if (!/^[6-9]\d{9}$/.test(mobile)) {
                mobileInput.style.borderColor = '#d93025';
                alert('‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡•à‡§ß ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                mobileInput.focus();
                return;
            }
            mobileInput.style.borderColor = '#ddd';
            
            const whatsappInput = document.getElementById('whatsapp');
            const whatsapp = whatsappInput.value.trim();
            if (whatsapp && !/^[6-9]\d{9}$/.test(whatsapp)) {
                whatsappInput.style.borderColor = '#d93025';
                alert('‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡•à‡§ß ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                whatsappInput.focus();
                return;
            }
            whatsappInput.style.borderColor = '#ddd';
            
            const panInput = document.getElementById('pan_business');
            const pan = panInput.value.trim().toUpperCase();
            if (!/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(pan)) {
                panInput.style.borderColor = '#d93025';
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß ‡§™‡•à‡§® ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§â‡§¶‡§æ‡§π‡§∞‡§£:-ABCDE1234F - 5 ‡§Ö‡§ï‡•ç‡§∑‡§∞, 4 ‡§Ö‡§Ç‡§ï, 1 ‡§Ö‡§ï‡•ç‡§∑‡§∞)');
                panInput.focus();
                return;
            }
            panInput.style.borderColor = '#ddd';
            panInput.value = pan;
            
            const requiredFields = document.querySelectorAll('input[required], textarea[required]');
            for (let field of requiredFields) {
                if (!field.value.trim() && field.type !== 'radio') {
                    field.style.borderColor = '#d93025';
                    const label = field.closest('.form-group').querySelector('label').textContent.replace('*', '').trim();
                    alert(`${label} ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à!`);
                    field.focus();
                    return;
                }
                field.style.borderColor = '#ddd';
            }
            
            const businessTypeChecked = document.querySelector('input[name="business_type"]:checked');
            if (!businessTypeChecked) {
                alert('‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç!');
                return;
            }
            
            submitBtn.disabled = true;
            submitBtn.textContent = '‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';
            statusDiv.innerHTML = '<div class="loading">üì§ PDF ‡§¨‡§®‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§°‡•á‡§ü‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</div>';
            statusDiv.style.display = 'block';
            
            try {
                const pdfBase64 = await generatePDFBase64();
                
                const formDataObj = {};
                
                document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="number"], textarea').forEach(field => {
                    formDataObj[field.name] = field.value || '';
                });
                
                formDataObj['business_type'] = businessTypeChecked ? businessTypeChecked.value : '';
                
                console.log('Form data being sent:', formDataObj);
                
                const fullName = formDataObj.full_name || 'Unknown';
                const appDate = formDataObj.application_date || new Date().toISOString().split('T')[0];
                const pdfFileName = `${fullName.replace(/\s+/g, '_')}_${appDate}_Form.pdf`;
                
                formDataObj['pdfData'] = pdfBase64;
                formDataObj['pdfFileName'] = pdfFileName;
                
                statusDiv.innerHTML = '<div class="loading">üì§ Google Drive ‡§™‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</div>';
                
                const urlParams = new URLSearchParams(formDataObj).toString();
                
                const response = await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: urlParams
                });
                
                const result = await response.text();
                console.log('Server response:', result);
                
                if (response.ok && result.includes('Success')) {
                    statusDiv.innerHTML = '<div class="success">‚úì ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§î‡§∞ PDF Google Drive ‡§Æ‡•á‡§Ç ‡§∏‡§π‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ!</div>';
                    document.getElementById('postSubmitActions').style.display = 'block';
                } else {
                    throw new Error(result || '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø');
                }
                
            } catch (error) {
                console.error('Submission error:', error);
                statusDiv.innerHTML = `<div class="error">‚ùå ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${error.message}. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§</div>`;
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = '‡§´‡•â‡§∞‡•ç‡§Æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç';
            }
        }
        
        async function generatePDFBase64() {
            return new Promise((resolve, reject) => {
                const element = document.getElementById('formContainer');
                const originalWidth = element.style.width;
                const originalMaxWidth = element.style.maxWidth;
                
                element.classList.add('pdf-mode');
                
                const hiddenElements = [];
                document.querySelectorAll('.submit-btn, .post-submit-actions, .submit-status, .status-msg').forEach(el => {
                    if (el.style.display !== 'none') {
                        hiddenElements.push(el);
                        el.style.display = 'none';
                    }
                });
                
                const opt = {
                    margin: [8, 8, 8, 8],
                    filename: 'form.pdf',
                    image: { type: 'jpeg', quality: 0.95 },
                    html2canvas: {
                        scale: 3,
                        useCORS: true,
                        logging: false,
                        letterRendering: true,
                        allowTaint: false,
                        scrollY: 0,
                        scrollX: 0,
                        backgroundColor: '#ffffff',
                        windowWidth: 794,
                        width: 794
                    },
                    jsPDF: {
                        unit: 'mm',
                        format: 'a4',
                        orientation: 'portrait',
                        compress: true
                    },
                    pagebreak: {
                        mode: ['avoid-all', 'css'],
                        avoid: ['.header', '.declaration', '.signature-section', '.section']
                    }
                };
                
                html2pdf().set(opt).from(element).outputPdf('datauristring').then(pdfDataUri => {
                    hiddenElements.forEach(el => {
                        el.style.display = '';
                    });
                    element.classList.remove('pdf-mode');
                    element.style.width = originalWidth;
                    element.style.maxWidth = originalMaxWidth;
                    
                    const base64 = pdfDataUri.split(',')[1];
                    resolve(base64);
                }).catch(err => {
                    console.error('PDF generation error:', err);
                    hiddenElements.forEach(el => {
                        el.style.display = '';
                    });
                    element.classList.remove('pdf-mode');
                    element.style.width = originalWidth;
                    element.style.maxWidth = originalMaxWidth;
                    reject(err);
                });
            });
        }
        
        function downloadPDF() {
            const overlay = document.getElementById('pdfOverlay');
            const loader = document.getElementById('pdfGenerating');
            
            overlay.classList.add('show');
            loader.classList.add('show');
            
            const element = document.getElementById('formContainer');
            const originalWidth = element.style.width;
            const originalMaxWidth = element.style.maxWidth;
            
            element.classList.add('pdf-mode');
            
            const hiddenElements = [];
            document.querySelectorAll('.submit-btn, .post-submit-actions, .submit-status, .status-msg').forEach(el => {
                if (el.style.display !== 'none') {
                    hiddenElements.push(el);
                    el.style.display = 'none';
                }
            });
            
            const opt = {
                margin: [8, 8, 8, 8],
                filename: 'Gita_Press_Vikreta_Panjikaran_Form.pdf',
                image: { type: 'jpeg', quality: 0.95 },
                html2canvas: {
                    scale: 3,
                    useCORS: true,
                    logging: false,
                    letterRendering: true,
                    allowTaint: false,
                    scrollY: 0,
                    scrollX: 0,
                    backgroundColor: '#ffffff',
                    windowWidth: 794,
                    width: 794
                },
                jsPDF: {
                    unit: 'mm',
                    format: 'a4',
                    orientation: 'portrait',
                    compress: true
                },
                pagebreak: {
                    mode: ['avoid-all', 'css'],
                    avoid: ['.header', '.declaration', '.signature-section', '.section']
                }
            };
            
            html2pdf().set(opt).from(element).save().then(() => {
                hiddenElements.forEach(el => {
                    el.style.display = '';
                });
                
                element.classList.remove('pdf-mode');
                element.style.width = originalWidth;
                element.style.maxWidth = originalMaxWidth;
                
                setTimeout(() => {
                    overlay.classList.remove('show');
                    loader.classList.remove('show');
                }, 500);
            }).catch(err => {
                console.error('PDF generation error:', err);
                alert('PDF ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§');
                
                hiddenElements.forEach(el => {
                    el.style.display = '';
                });
                
                element.classList.remove('pdf-mode');
                element.style.width = originalWidth;
                element.style.maxWidth = originalMaxWidth;
                overlay.classList.remove('show');
                loader.classList.remove('show');
            });
        }
        
        function shareOnWhatsApp() {
            const formData = {
                shop_name: document.querySelector('[name="shop_name"]').value,
                full_name: document.querySelector('[name="full_name"]').value,
                mobile: document.querySelector('[name="mobile"]').value,
                city: document.querySelector('[name="city"]').value
            };
            const message = `‡§ó‡•Ä‡§§‡§æ ‡§™‡•ç‡§∞‡•á‡§∏ ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§´‡•â‡§∞‡•ç‡§Æ ‡§ú‡§Æ‡§æ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ\n\n‡§¶‡•Å‡§ï‡§æ‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ: ${formData.shop_name}\n‡§®‡§æ‡§Æ: ${formData.full_name}\n‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: ${formData.mobile}\n‡§∂‡§π‡§∞: ${formData.city}`;
            const whatsappURL = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }
    </script>
</body>
</html>
